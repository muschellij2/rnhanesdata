<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Reweight NHANES accelerometry data — reweight_accel • rnhanesdata</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Reweight NHANES accelerometry data — reweight_accel" />

<meta property="og:description" content="This function re-weights accelerometry data for NHANES 2003-2004,2005-2006 waves." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rnhanesdata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/create-all-processed-data.html">Creating all processed data in the rnhanesdata package</a>
    </li>
    <li>
      <a href="../articles/vignette_prediction.html">The predictive performance of objective activity measures derived from accelerometry data for 5-year all-cause mortality in NHANES</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/andrew-leroux/rnhanesdata">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Reweight NHANES accelerometry data</h1>
    <small class="dont-index">Source: <a href='https://github.com/andrew-leroux/rnhanesdata/blob/master/R/process_accel.R'><code>R/process_accel.R</code></a></small>
    <div class="hidden name"><code>reweight_accel.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This function re-weights accelerometry data for NHANES 2003-2004,2005-2006 waves.</p>
    
    </div>

    <pre class="usage"><span class='fu'>reweight_accel</span>(<span class='no'>data</span>, <span class='kw'>return_unadjusted_wts</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>age_bks</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>1</span>, <span class='fl'>3</span>,
  <span class='fl'>6</span>, <span class='fl'>12</span>, <span class='fl'>16</span>, <span class='fl'>20</span>, <span class='fl'>30</span>, <span class='fl'>40</span>, <span class='fl'>50</span>, <span class='fl'>60</span>, <span class='fl'>70</span>, <span class='fl'>80</span>, <span class='fl'>85</span>, <span class='fl'>Inf</span>), <span class='kw'>right</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>Data frame to with survey weights to be re-weighted. Should not contain any duplicated participants. That is, each row
of this dataframe should correspond to a unique value of SEQN.
The data frame supplied to data must have the columns: SEQN", SDDSRVYR,WTMEC2YR, and WTINT2YR.</p></td>
    </tr>
    <tr>
      <th>return_unadjusted_wts</th>
      <td><p>Logical value indicating whether to return the unadjusted 2-year and, if applicable, 4-year survey weights for all participants.</p></td>
    </tr>
    <tr>
      <th>age_bks</th>
      <td><p>Vector of ages which define the intervals used for re-weighting. This argument is passed to the <code><a href='https://www.rdocumentation.org/packages/base/topics/cut'>cut</a></code> function to create age categories which are in turn
used to re-weight participants. The argument "right" determines whether these intervals will be closed on the right or the left.</p></td>
    </tr>
    <tr>
      <th>right</th>
      <td><p>Logical value indicating whether the age intervals defined by the "age_bks" arguement should be closed on the left (right=FALSE) or the right (right=TRUE).
See <code><a href='https://www.rdocumentation.org/packages/base/topics/cut'>cut</a></code> for additional details and examples. Defaults to TRUE.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The function reweight_accel will return a dataframe with the same columns as the data frame supplied to the "data" argument with either 8 or 16 additional columns.
If the data supplied to the reweight_accel function only comes from one NHANES wave, then only the 2-year survey weights will be returned.
If there are data from both the 2003-2004 and 2005-2006 waves supplied to the reweight_accel function, then both the 2-year and 4-year survey weights will be
returned. Any time an analysis is done using the combined data, the appropriate 4-year survey weight should be used.</p>
<p>These survey weights are described below.</p>


<ul>
<li><p>Examination survey weights</p><ul>
<li><p>wtmec2yr_adj: The age, gender, and ethnicity re-weighted 2-year survey weight</p></li>
<li><p>wtmec2yr_adj_norm: Normalized version of wtmec2yr_adj. This is calculated as wtmec2yr_adj/mean(wtmec2yr_adj)</p></li>
<li><p>wtmec4yr_adj: The age, gender, and the ethnicity re-weighted 4-year survey weight. This is calculated as wtmec2yr_adj/2.</p></li>
<li><p>wtmec4yr_adj_norm: Normalized version of wtmec4yr_adj. This is calculated as wtmec4yr_adj/mean(wtmec4yr_adj)</p></li>
<li><p>wtmec2yr_unadj: Unadjusted 2-year examination weight. This is just a copy of the WTMEC2YR variable.</p></li>
<li><p>wtmec2yr_unadj_norm: Normalized version of wtmec2yr_adj. This is calculated as wtmec2yr_unadj/mean(wtmec2yr_unadj)</p></li>
<li><p>wtmec4yr_unadj: Unadjusted 4-year examination weight. This is calculated as wtmec2yr_unadj/2.</p></li>
<li><p>wtmec4yr_unadj_norm: Normalized version of wtmec4yr_unadj. This is calculated as wtmec4yr_unadj/mean(wtmec4yr_unadj)</p></li>
</ul></li>
<li><p>Interview survey weights</p><ul>
<li><p>wtint2yr_adj: The age, gender, and ethnicity re-weighted 2-year survey weight</p></li>
<li><p>wtint2yr_adj_norm: Normalized version of wtint2yr_adj. This is calculated as wtint2yr_adj/mean(wtint2yr_adj)</p></li>
<li><p>wtint4yr_adj: The age, gender, and the ethnicity re-weighted 4-year survey weight. This is calculated as wtint2yr_adj/2.</p></li>
<li><p>wtint4yr_adj_norm: Normalized version of wtint4yr_adj. This is calculated as wtint4yr_adj/mean(wtint4yr_adj)</p></li>
<li><p>wtint2yr_unadj: Unadjusted 2-year examination weight. This is just a copy of the wtint2YR variable.</p></li>
<li><p>wtint2yr_unadj_norm: Normalized version of wtint2yr_adj. This is calculated as wtint2yr_unadj/mean(wtint2yr_unadj)</p></li>
<li><p>wtint4yr_unadj: Unadjusted 4-year examination weight. This is calculated as wtint2yr_unadj/2.</p></li>
<li><p>wtint4yr_unadj_norm: Normalized version of wtint4yr_unadj. This is calculated as wtint4yr_unadj/mean(wtint4yr_unadj)</p></li>
</ul></li>
</ul>

<p>If any of the 14 columns described above are already in the dataframe supplied to the data argument, they will be overwritten and a
warning will be printed to the console. This may occur when an individual subsets their data multiple times and re-weights at each step.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The reweight_accel function is designed to re-weight only the 2003-2004 and 2005-2006 waves in the context of missing data.
This function calculates 2- and 4- year adjusted and unadjusted survey weights.
The re-weighting is performed using age, sex, and ehtnicity strata applied to each wave separately.
More specifically, individuals in the data frame supplied to the function via the
"data" argument are upweighted by a factor such that the sum of their weights is equal to the total survey weight in the
population strata. If data are missing completely at random within each of these strata, then these re-weighted strata are
representative of the corresponding strata in the larger study.</p>
<p>Users should ensure that if they intend to use the adjusted weights calculated by this function, that the data they reweight aligns with
the re-weighted strategy, particularly with regard to age. That is, it does make sense to reweight all individuals 58-60 to be representative of
all individuals ages 50-60. The age categories used in re-weighting are controlled by the "age_bks" argument. In illustrate the problems of misalignment of ages
in the examples below. Moreover, the re-weighting is done separately for the interview and examination weights. Because there is a time lag between the interview and the exam, individuals
may belong to different age strata for the purposes of re-weighting the interview and examination survey weights. Therefore, users need to make sure the
ages in their data align with the survey weight they intend to use.</p>
<p>It is possible that if there are one or more strata that are sparse, the survey weights. Users should always inspect the adjusted survey weights
for outliers.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>

</div><span class='co'># NOT RUN {</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='st'>"rnhanesdata"</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Random'>set.seed</a></span>(<span class='fl'>1241</span>)
<span class='co'>## load the 2003-2004 demographic data</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>(<span class='st'>"Covariate_C"</span>)

<span class='co'>## consider just those individuals between the ages in the interval [50,80)</span>
<span class='co'>## at the exam portion of the study</span>
<span class='no'>df50</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/subset'>subset</a></span>(<span class='no'>Covariate_C</span>, <span class='no'>RIDAGEEX</span>/<span class='fl'>12</span> <span class='kw'>&gt;=</span> <span class='fl'>50</span> <span class='kw'>&amp;</span> <span class='no'>RIDAGEEX</span>/<span class='fl'>12</span> <span class='kw'>&lt;</span><span class='fl'>80</span>)

<span class='co'>## subsample 75% of these individuals, then re-weight the data</span>
<span class='no'>df50_sub</span> <span class='kw'>&lt;-</span> <span class='no'>df50</span>[<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sample'>sample</a></span>(<span class='fl'>1</span>:<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/nrow'>nrow</a></span>(<span class='no'>df50</span>), <span class='kw'>replace</span><span class='kw'>=</span><span class='fl'>FALSE</span>, <span class='kw'>size</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Round'>floor</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/nrow'>nrow</a></span>(<span class='no'>df50</span>)*<span class='fl'>0.75</span>)),]
<span class='no'>df50_rw</span>  <span class='kw'>&lt;-</span> <span class='fu'>reweight_accel</span>(<span class='no'>df50</span>)

<span class='co'>## check the unadjusted weights 2-year weights match the WTMEC2YR variable</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sum'>sum</a></span>(<span class='no'>df50_rw</span>$<span class='no'>WTMEC2YR</span> <span class='kw'>!=</span> <span class='no'>df50_rw</span>$<span class='no'>wtmec2yr_unadj</span>)

<span class='co'>## See that the adjusted interview weights are massively inflated</span>
<span class='co'>## This is because there are individuals who are in the [40,50) strata during the interview</span>
<span class='co'>## by are in the [50,60) strata for the exam. These few individuals are upweighted to</span>
<span class='co'>## "represent" all individuals [50,60) during the interview, which clearly doesn't make sense.</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/summary'>summary</a></span>(<span class='no'>df50_rw</span>$<span class='no'>wtint2yr_adj</span>)

<span class='co'>## Subsetting the reweighted dataset</span>




<span class='co'># }</span><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Andrew Leroux.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

