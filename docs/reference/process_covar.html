<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Merge non-accelerometry data for NHANES waves — process_covar • rnhanesdata</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Merge non-accelerometry data for NHANES waves — process_covar" />

<meta property="og:description" content="This function retrieves and merges covariate data
from one or more NHANES data files across one or more waves of the study. Variables are merged using the NHANES unique subject identifier (SEQN)." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rnhanesdata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/create-all-processed-data.html">Creating all processed data in the rnhanesdata package</a>
    </li>
    <li>
      <a href="../articles/vignette_prediction.html">The predictive performance of objective activity measures derived from accelerometry data for 5-year all-cause mortality in NHANES</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/andrew-leroux/rnhanesdata">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Merge non-accelerometry data for NHANES waves</h1>
    <small class="dont-index">Source: <a href='https://github.com/andrew-leroux/rnhanesdata/blob/master/R/process_accel.R'><code>R/process_accel.R</code></a></small>
    <div class="hidden name"><code>process_covar.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This function retrieves and merges covariate data
from one or more NHANES data files across one or more waves of the study. Variables are merged using the NHANES unique subject identifier (SEQN).</p>
    
    </div>

    <pre class="usage"><span class='fu'>process_covar</span>(<span class='kw'>waves</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"C"</span>, <span class='st'>"D"</span>), <span class='kw'>varnames</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"SDDSRVYR"</span>, <span class='st'>"WTMEC2YR"</span>,
  <span class='st'>"WTINT2YR"</span>, <span class='st'>"SDMVPSU"</span>, <span class='st'>"SDMVSTRA"</span>, <span class='st'>"RIDAGEMN"</span>, <span class='st'>"RIDAGEEX"</span>, <span class='st'>"RIDRETH1"</span>,
  <span class='st'>"RIAGENDR"</span>, <span class='st'>"BMXWT"</span>, <span class='st'>"BMXHT"</span>, <span class='st'>"BMXBMI"</span>, <span class='st'>"DMDEDUC2"</span>, <span class='st'>"ALQ101"</span>, <span class='st'>"ALQ110"</span>,
  <span class='st'>"ALQ120Q"</span>, <span class='st'>"ALQ120U"</span>, <span class='st'>"ALQ130"</span>, <span class='st'>"SMQ020"</span>, <span class='st'>"SMD030"</span>, <span class='st'>"SMQ040"</span>, <span class='st'>"MCQ220"</span>,
  <span class='st'>"MCQ160F"</span>, <span class='st'>"MCQ160B"</span>, <span class='st'>"MCQ160C"</span>, <span class='st'>"PFQ049"</span>, <span class='st'>"PFQ054"</span>, <span class='st'>"PFQ057"</span>, <span class='st'>"PFQ059"</span>,
  <span class='st'>"PFQ061B"</span>, <span class='st'>"PFQ061C"</span>, <span class='st'>"DIQ010"</span>), <span class='kw'>localpath</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>extractAll</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>waves</th>
      <td><p>character vector with entries of (capitalized) letter of the alphabet corresponding to the
NHANES wave of interest. Defaults to a vector containing "C" and "D" corresponding to the NHANES 2003-2004 and 2005-2006 waves.</p></td>
    </tr>
    <tr>
      <th>varnames</th>
      <td><p>character vector indicating which column names are to be searched for.
Will check all .XPT files in located in the directory specified by dataPath. If extractAll = TRUE, then this argument is effectively ignored. Defaults
to variables which are required to create the processed data matrices <code><a href='Covariate_C.html'>Covariate_C</a></code> and  <code><a href='Covariate_D.html'>Covariate_D</a></code>. If "SEQN" is not included in
varnames, it will be autmatically added.</p></td>
    </tr>
    <tr>
      <th>localpath</th>
      <td><p>file path where covariate data are saved. Covariate data must be in .XPT format,
and should be in their own folder. For example, PAXRAW_C.XPT should not be located in the folder with
your covariate files. This will not cause an error, but the code will take much longer to run.</p></td>
    </tr>
    <tr>
      <th>extractAll</th>
      <td><p>logical argument indicating whether all columns of all .XPT files in the search path should be returned.
If extractALL = TRUE, all variables from all .XPT files with
Defaults to FALSE.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>This function will return a list with number of elements equal to the number of waves of data specified by the "waves" argument.
The name of each element is Covariate_\* where  \* corresponds to each element of the "waves" argument.
If none of the variables listed in the "varnames" arguemnt (and/or SEQN if SEQN was not supplied to the  "varnames" argument)
for a particular wave are found, then the element of the returned object will be NULL.
If none of the user specified variables are found, but subject identifiers (SEQN) are found, the corresponding elements will still be NULL.
See the examples below for illustrations of these scenarios.</p>
<p>Most variables in NHANES are measured once per individual. In the event that a user requests a variable which has multiple records for a subject,
this function will return the variable in matrix format, with one row per participant and number of columns equal to the number of observations per participant.
This matrix is returned within each dataframe using an object with class "AsIs" (See <code><a href='https://www.rdocumentation.org/packages/base/topics/AsIs'>I</a></code> for details).
For a concrete example, see the examples below.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function will search all .XPT files which match the NHANES naming convention associated with the
character vector supplied to the "waves" argument in the specified data directory
(either the "localpath" argument, or the raw NHANES data included in the <code><a href='rnhanesdata-package.html'>rnhanesdata</a></code> package).
Any file which matches the relevant naming convention AND has "SEQN" as their first column name will be searched for the variables requested in the
"varnames" argument.</p>
<p>It is recommended that if using the process_covar function to merge variables locally, that the local directory include the demographic dataset for each wave
(DEMO_C.XPT and DEMO_D.XPT for the 2003-2004 and 2005-2006 waves, respectively).
The reason for this is that without the demographic dataset, there is no guarantee that all
participants in a wave will be included in the returned results.
If the demographic datasets are not in the directory specified by localpath a warnining will be produced.
In addition, it is recommended that the local directory contain only .XPT files associated with NHANES.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='st'>"rnhanesdata"</span>)

<span class='co'>## retrieve default variables</span>
<span class='no'>covar_ls</span> <span class='kw'>&lt;-</span> <span class='fu'>process_covar</span>()</div><div class='output co'>#&gt;   |                                                                              |                                                                      |   0%
#&gt;  For C cohort, 32 Covariates Found of 32 specified. Missing covariates: </div><div class='output co'>#&gt; </div><div class='output co'>#&gt;   |                                                                              |===================================                                   |  50%
#&gt;  For D cohort, 32 Covariates Found of 32 specified. Missing covariates: </div><div class='output co'>#&gt; </div><div class='output co'>#&gt;   |                                                                              |======================================================================| 100%</div><div class='input'>
<span class='co'>## re-code gender for the both the 2003-2004 and 2005-2006 waves</span>
<span class='no'>covar_ls</span>$<span class='no'>Covariate_C</span>$<span class='no'>Gender</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/factor'>factor</a></span>(<span class='no'>covar_ls</span>$<span class='no'>Covariate_C</span>$<span class='no'>RIAGENDR</span>, <span class='kw'>levels</span><span class='kw'>=</span><span class='fl'>1</span>:<span class='fl'>2</span>,
                                      <span class='kw'>labels</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"Male"</span>,<span class='st'>"Female"</span>), <span class='kw'>ordered</span><span class='kw'>=</span><span class='fl'>FALSE</span>)
<span class='no'>covar_ls</span>$<span class='no'>Covariate_D</span>$<span class='no'>Gender</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/factor'>factor</a></span>(<span class='no'>covar_ls</span>$<span class='no'>Covariate_D</span>$<span class='no'>RIAGENDR</span>, <span class='kw'>levels</span><span class='kw'>=</span><span class='fl'>1</span>:<span class='fl'>2</span>,
                                      <span class='kw'>labels</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"Male"</span>,<span class='st'>"Female"</span>), <span class='kw'>ordered</span><span class='kw'>=</span><span class='fl'>FALSE</span>)

<span class='co'>## check that this matches the gender information in the processed data</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identical'>identical</a></span>(<span class='no'>covar_ls</span>$<span class='no'>Covariate_C</span>[,<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"SEQN"</span>,<span class='st'>"Gender"</span>)], <span class='no'>Covariate_C</span>[,<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"SEQN"</span>,<span class='st'>"Gender"</span>)])</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/identical'>identical</a></span>(<span class='no'>covar_ls</span>$<span class='no'>Covariate_D</span>[,<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"SEQN"</span>,<span class='st'>"Gender"</span>)], <span class='no'>Covariate_D</span>[,<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"SEQN"</span>,<span class='st'>"Gender"</span>)])</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='co'>## See the data processing package vignette</span>
<span class='co'>## for code to fully reproduce the processed data</span>
<span class='co'>## included in the package</span>


<span class='co'>## Example where only the participant identifer (SEQN) is found for</span>
<span class='co'>## the 2003-2004 and 2005-2006 waves, and no data is found for the 2007-2008 wave.</span>
<span class='no'>covar_ls2</span> <span class='kw'>&lt;-</span> <span class='fu'>process_covar</span>(<span class='kw'>waves</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"C"</span>,<span class='st'>"D"</span>,<span class='st'>"E"</span>), <span class='kw'>varnames</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"ThisIsNotValid"</span>))</div><div class='output co'>#&gt; One or more demographic files were not found in the data directory (DEMO_C.XPT, DEMO_D.XPT, DEMO_E.XPT).
#&gt;                            There is no guarantee all participants for a particular wave will be included in the returned object.</div><div class='output co'>#&gt; <span class='warning'>Warning: </span></div><div class='output co'>#&gt;   |                                                                              |                                                                      |   0%
#&gt;  No variables specified by the varnames argument was found for wave C</div><div class='output co'>#&gt; </div><div class='output co'>#&gt;   |                                                                              |=======================                                               |  33%
#&gt;  No variables specified by the varnames argument was found for wave D</div><div class='output co'>#&gt; </div><div class='output co'>#&gt;   |                                                                              |===============================================                       |  67%
#&gt;  No data associated with wave E was found. </div><div class='output co'>#&gt; </div><div class='output co'>#&gt;   |                                                                              |======================================================================| 100%</div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/str'>str</a></span>(<span class='no'>covar_ls2</span>)</div><div class='output co'>#&gt; List of 3
#&gt;  $ Covariate_C: NULL
#&gt;  $ Covariate_D: NULL
#&gt;  $ Covariate_E: NULL</div><div class='input'>

<span class='co'>## Example of variables with possibly multiple responses per participant.</span>
<span class='co'>## These variables correspond to self reported physical activity types:</span>
<span class='co'>##   PADACTIV: physical activity type (i.e. basketball, swimming, etc.)</span>
<span class='co'>##   PADLEVEL: intensity of activity identified by PADACTIV (moderate or vigorous)</span>
<span class='co'>##   PADTIMES: # of times activity identified by PADACTIV was done in the past 30 days</span>
<span class='co'>## See the codebook at https://wwwn.cdc.gov/Nchs/Nhanes/2003-2004/PAQIAF_C.htm#PADTIMES</span>
<span class='co'>## for additional descriptions of these variables for the 2003-2004 wave</span>
<span class='no'>covar_ls3</span> <span class='kw'>&lt;-</span> <span class='fu'>process_covar</span>(<span class='kw'>waves</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"C"</span>,<span class='st'>"D"</span>), <span class='kw'>varnames</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"PADACTIV"</span>,<span class='st'>"PADLEVEL"</span>,<span class='st'>"PADTIMES"</span>))</div><div class='output co'>#&gt;   |                                                                              |                                                                      |   0%
#&gt;  For C cohort, 3 Covariates Found of 3 specified. Missing covariates: </div><div class='output co'>#&gt; </div><div class='output co'>#&gt; 
#&gt;  Variables with repeated observations per subject found for the following variables: PADACTIV,PADLEVEL,PADTIMES Note that these variables will be stored with class AsIs() objects in resulting data frames.  See ?I for details on AsIs class. </div><div class='output co'>#&gt; </div><div class='output co'>#&gt;   |                                                                              |===================================                                   |  50%
#&gt;  For D cohort, 3 Covariates Found of 3 specified. Missing covariates: </div><div class='output co'>#&gt; </div><div class='output co'>#&gt; 
#&gt;  Variables with repeated observations per subject found for the following variables: PADACTIV,PADLEVEL,PADTIMES Note that these variables will be stored with class AsIs() objects in resulting data frames.  See ?I for details on AsIs class. </div><div class='output co'>#&gt; </div><div class='output co'>#&gt;   |                                                                              |======================================================================| 100%</div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/str'>str</a></span>(<span class='no'>covar_ls3</span>)</div><div class='output co'>#&gt; List of 2
#&gt;  $ Covariate_C:'data.frame':	4782 obs. of  4 variables:
#&gt;   ..$ SEQN    : int [1:4782] 21007 21008 21009 21010 21012 21013 21015 21016 21024 21025 ...
#&gt;   ..$ PADACTIV: 'AsIs' num [1:4782, 1:20] 38 43 42 42 42 15 36 12 42 12 ...
#&gt;   ..$ PADLEVEL: 'AsIs' num [1:4782, 1:20] 2 1 1 1 1 1 1 1 1 2 ...
#&gt;   ..$ PADTIMES: 'AsIs' num [1:4782, 1:20] 1 13 4 30 1 9 90 13 8 21 ...
#&gt;  $ Covariate_D:'data.frame':	4901 obs. of  4 variables:
#&gt;   ..$ SEQN    : int [1:4901] 31129 31132 31134 31136 31137 31139 31141 31143 31144 31148 ...
#&gt;   ..$ PADACTIV: 'AsIs' num [1:4901, 1:19] 42 19 42 40 15 10 11 13 11 23 ...
#&gt;   ..$ PADLEVEL: 'AsIs' num [1:4901, 1:19] 1 1 1 1 1 1 1 2 1 1 ...
#&gt;   ..$ PADTIMES: 'AsIs' num [1:4901, 1:19] 13 20 13 13 17 30 3 30 1 2 ...</div><div class='input'>




</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Andrew Leroux.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

